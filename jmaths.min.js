!function(n){var t=t||{};function i(n,t){return Math.sqrt(Math.pow(n[0]-t[0],2)+Math.pow(n[1]-t[1],2))}function o(n,t){return Math.atan2(t[1]-n[1],t[0]-n[0])}function f(n,t){if(n&&n.length){var r,e=n[0],o=n[1],i=e instanceof Array?e.length:0;switch(n.length){case 1:return i?e.slice():e;case 2:if(i){var u=[];for(r=0;r<i;r++)u[r]=f([e[r],o[r]],t);return u}return e+(o-e)*t;default:var a=[];for(r=1;r<n.length;r++)a.push(f([n[r-1],n[r]],t));return f(a,t)}}}function u(n,t,r){if(t[0]===r[0]&&t[1]===r[1])return i(n,t);var e=((t[0]-r[0])*(t[0]-n[0])+(t[1]-r[1])*(t[1]-n[1]))/((t[0]-r[0])*(t[0]-r[0])+(t[1]-r[1])*(t[1]-r[1]));return i(n,f([t,r],Math.max(0,Math.min(1,e))))}t.pointToPoint=i,t.pointToAngle=o,t.rotatePoint=function(n,t,r){var e=i(t,n);return r=o(t,n)+r,[t[0]+Math.cos(r)*e,t[1]+Math.sin(r)*e]},t.bezier=f,t.cutBezier=function(n,t){if(n&&!(n.length<2)){for(var r=[],e=[],o=[],i=[],u=0;u<n.length;u++)r.push(n[u]),o.push(f(r,t)),e.unshift(n[n.length-u-1]),i.unshift(f(e,t));return[o,i]}},t.pointToLine=u,t.sign=function(n){return 0===n?0:n<0?-1:1},t.doubleLineIntersect=function(n,t,r,e){var o=(e[0]-r[0])*(n[1]-r[1])-(e[1]-r[1])*(n[0]-r[0]),i=(t[0]-n[0])*(n[1]-r[1])-(t[1]-n[1])*(n[0]-r[0]),u=(e[1]-r[1])*(t[0]-n[0])-(e[0]-r[0])*(t[1]-n[1]);if(0!==u){var a=o/u,f=i/u;if(0<=a&&a<=1&&0<=f&&f<=1)return[n[0]+a*(t[0]-n[0]),n[1]+a*(t[1]-n[1])]}},t.pointToPolyline=function(n,t){if(n&&t&&t.length){for(var r=i(n,t[0]),e=1,o=t.length;e<o;e++)r=Math.min(r,u(n,t[e-1],t[e]));return r}},t.pointInPolygon=function(n,t){for(var r=0,e=0;e<t.length;e++){var o=t[e],i=t[(e+1)%t.length];o[1]!==i[1]&&(n[1]<Math.min(o[1],i[1])||n[1]>=Math.max(o[1],i[1])||(n[1]-o[1])*(i[0]-o[0])/(i[1]-o[1])+o[0]>n[0]&&r++)}return r%2==1},t.regularPolygon=function(n,t,r,e,o){for(var i=o||0,u=[],a=0;a<n;a++){var f=i+a/n*Math.PI*2,h=[t+Math.cos(f)*e,r+Math.sin(f)*e];u.push(h)}return u},"function"==typeof define?(define.amd||define.cmd)&&define(function(){return t}):"undefined"!=typeof module&&module.exports?module.exports=t:window.jmaths=t}();